<?xml version="1.0" encoding="UTF-8"?>
<mxfile host="Electron" modified="2026-02-14T12:00:00.000Z" agent="VSCode" version="21.0.0" type="device">
  <diagram id="ComplexGreenArch" name="Detailed Architecture">
    <mxGraphModel dx="2200" dy="1200" grid="1" gridSize="10" guides="1" tooltips="1" connect="1" arrows="1" fold="1" page="1" pageScale="1" pageWidth="1600" pageHeight="1200" math="0" shadow="0">
      <root>
        <mxCell id="0" />
        <mxCell id="1" parent="0" />

        <mxCell id="style_green" value="rounded=1;whiteSpace=wrap;html=1;fillColor=#d5e8d4;strokeColor=#82b366;fontColor=#000000;fontStyle=1;" style="text;html=1;" vertex="1" parent="1"><mxGeometry x="0" y="0" width="0" height="0" as="geometry" /></mxCell>
        <mxCell id="style_yellow" value="rounded=1;whiteSpace=wrap;html=1;fillColor=#fff2cc;strokeColor=#d6b656;fontColor=#000000;fontStyle=1;" style="text;html=1;" vertex="1" parent="1"><mxGeometry x="0" y="0" width="0" height="0" as="geometry" /></mxCell>
        <mxCell id="style_white" value="rounded=1;whiteSpace=wrap;html=1;fillColor=#f5f5f5;strokeColor=#666666;fontColor=#333333;" style="text;html=1;" vertex="1" parent="1"><mxGeometry x="0" y="0" width="0" height="0" as="geometry" /></mxCell>

        <mxCell id="mobile_container" value="ANDROID CLIENT (KOTLIN MULTIPLATFORM)" style="swimlane;whiteSpace=wrap;html=1;fillColor=#2a2a2a;strokeColor=#6c8ebf;fontColor=#ffffff;startSize=30;" vertex="1" parent="1">
          <mxGeometry x="40" y="80" width="380" height="680" as="geometry" />
        </mxCell>

        <mxCell id="ui_compose" value="Jetpack Compose UI" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#d5e8d4;strokeColor=#82b366;" vertex="1" parent="mobile_container">
          <mxGeometry x="30" y="50" width="140" height="40" as="geometry" />
        </mxCell>
        <mxCell id="nav_graph" value="NavGraph" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#d5e8d4;strokeColor=#82b366;" vertex="1" parent="mobile_container">
          <mxGeometry x="190" y="50" width="80" height="40" as="geometry" />
        </mxCell>

        <mxCell id="viewmodel" value="ViewModel (StateFlow)" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#fff2cc;strokeColor=#d6b656;" vertex="1" parent="mobile_container">
          <mxGeometry x="30" y="130" width="240" height="40" as="geometry" />
        </mxCell>
        <mxCell id="usecase" value="Use Cases (Domain)" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#fff2cc;strokeColor=#d6b656;" vertex="1" parent="mobile_container">
          <mxGeometry x="30" y="190" width="240" height="30" as="geometry" />
        </mxCell>
        
        <mxCell id="repo_green" value="GreenPointsRepository" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#d5e8d4;strokeColor=#82b366;" vertex="1" parent="mobile_container">
          <mxGeometry x="30" y="260" width="140" height="40" as="geometry" />
        </mxCell>
        <mxCell id="repo_loan" value="LoanRepository" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#f5f5f5;strokeColor=#666666;" vertex="1" parent="mobile_container">
          <mxGeometry x="190" y="260" width="140" height="40" as="geometry" />
        </mxCell>

        <mxCell id="camerax" value="CameraX (Analyzer)" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#d5e8d4;strokeColor=#82b366;" vertex="1" parent="mobile_container">
          <mxGeometry x="30" y="440" width="140" height="40" as="geometry" />
        </mxCell>
        <mxCell id="gps" value="FusedLocationProvider" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#d5e8d4;strokeColor=#82b366;" vertex="1" parent="mobile_container">
          <mxGeometry x="190" y="440" width="140" height="40" as="geometry" />
        </mxCell>
        <mxCell id="room_db" value="Room DB (Cache)" style="shape=cylinder3;whiteSpace=wrap;html=1;boundedLbl=1;backgroundOutline=1;size=15;fillColor=#f5f5f5;" vertex="1" parent="mobile_container">
          <mxGeometry x="130" y="520" width="100" height="60" as="geometry" />
        </mxCell>

        <mxCell id="ktor" value="Ktor Client" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#f8cecc;strokeColor=#b85450;" vertex="1" parent="mobile_container">
          <mxGeometry x="30" y="340" width="300" height="30" as="geometry" />
        </mxCell>
        <mxCell id="interceptor" value="AuthInterceptor (Bearer)" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#f8cecc;strokeColor=#b85450;fontSize=10;" vertex="1" parent="mobile_container">
          <mxGeometry x="50" y="370" width="260" height="20" as="geometry" />
        </mxCell>

        <mxCell id="gateway_container" value="API GATEWAY (NGINX / KONG)" style="swimlane;whiteSpace=wrap;html=1;fillColor=#fff2cc;strokeColor=#d6b656;startSize=23;" vertex="1" parent="1">
          <mxGeometry x="500" y="250" width="240" height="300" as="geometry" />
        </mxCell>
        <mxCell id="rate_limit" value="Rate Limiter" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#ffffff;strokeColor=#000000;" vertex="1" parent="gateway_container">
          <mxGeometry x="20" y="40" width="200" height="30" as="geometry" />
        </mxCell>
        <mxCell id="ssl_term" value="SSL Termination" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#ffffff;strokeColor=#000000;" vertex="1" parent="gateway_container">
          <mxGeometry x="20" y="80" width="200" height="30" as="geometry" />
        </mxCell>
        <mxCell id="router" value="Route Dispatcher" style="rhombus;whiteSpace=wrap;html=1;fillColor=#fff2cc;strokeColor=#d6b656;" vertex="1" parent="gateway_container">
          <mxGeometry x="60" y="130" width="120" height="80" as="geometry" />
        </mxCell>
        <mxCell id="logger" value="Audit Logger" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#f5f5f5;" vertex="1" parent="gateway_container">
          <mxGeometry x="20" y="240" width="200" height="30" as="geometry" />
        </mxCell>

        <mxCell id="green_container" value="GREEN POINTS SERVICE (KTOR)" style="swimlane;whiteSpace=wrap;html=1;fillColor=#d5e8d4;strokeColor=#82b366;startSize=23;" vertex="1" parent="1">
          <mxGeometry x="850" y="80" width="340" height="380" as="geometry" />
        </mxCell>
        <mxCell id="qr_validator" value="QR Validator" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#ffffff;strokeColor=#82b366;" vertex="1" parent="green_container">
          <mxGeometry x="30" y="40" width="120" height="40" as="geometry" />
        </mxCell>
        <mxCell id="geo_engine" value="Geo-Fencing Engine" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#ffffff;strokeColor=#82b366;" vertex="1" parent="green_container">
          <mxGeometry x="170" y="40" width="140" height="40" as="geometry" />
        </mxCell>
        <mxCell id="points_calc" value="Points Calculator" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#d5e8d4;strokeColor=#82b366;fontStyle=1" vertex="1" parent="green_container">
          <mxGeometry x="80" y="110" width="180" height="40" as="geometry" />
        </mxCell>
        <mxCell id="event_pub" value="Event Publisher (Kafka)" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#f8cecc;strokeColor=#b85450;" vertex="1" parent="green_container">
          <mxGeometry x="30" y="180" width="280" height="30" as="geometry" />
        </mxCell>
        
        <mxCell id="mongo_db" value="MongoDB (Collections:&#xa;Deposits, Users, Centers)" style="shape=cylinder3;whiteSpace=wrap;html=1;boundedLbl=1;backgroundOutline=1;size=15;fillColor=#d5e8d4;strokeColor=#82b366;" vertex="1" parent="green_container">
          <mxGeometry x="90" y="240" width="160" height="90" as="geometry" />
        </mxCell>

        <mxCell id="mifos_container" value="LEGACY CORE (SPRING BOOT)" style="swimlane;whiteSpace=wrap;html=1;fillColor=#f5f5f5;strokeColor=#666666;startSize=23;" vertex="1" parent="1">
          <mxGeometry x="850" y="500" width="340" height="320" as="geometry" />
        </mxCell>
        <mxCell id="loan_controller" value="LoanController" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#ffffff;strokeColor=#666666;" vertex="1" parent="mifos_container">
          <mxGeometry x="30" y="40" width="130" height="30" as="geometry" />
        </mxCell>
        <mxCell id="client_controller" value="ClientController" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#ffffff;strokeColor=#666666;" vertex="1" parent="mifos_container">
          <mxGeometry x="180" y="40" width="130" height="30" as="geometry" />
        </mxCell>
        <mxCell id="scheduler" value="Quartz Scheduler (Penalties)" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#fff2cc;strokeColor=#d6b656;" vertex="1" parent="mifos_container">
          <mxGeometry x="30" y="100" width="280" height="30" as="geometry" />
        </mxCell>
        <mxCell id="mysql_db" value="MySQL Relational DB&#xa;(mifos_tenants)" style="shape=cylinder3;whiteSpace=wrap;html=1;boundedLbl=1;backgroundOutline=1;size=15;fillColor=#ffffff;strokeColor=#000000;" vertex="1" parent="mifos_container">
          <mxGeometry x="90" y="180" width="160" height="90" as="geometry" />
        </mxCell>

        <mxCell id="c1" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" edge="1" parent="1" source="ui_compose" target="viewmodel"><mxGeometry relative="1" as="geometry" /></mxCell>
        <mxCell id="c2" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" edge="1" parent="1" source="viewmodel" target="usecase"><mxGeometry relative="1" as="geometry" /></mxCell>
        <mxCell id="c3" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0.5;entryY=0;entryDx=0;entryDy=0;" edge="1" parent="1" source="usecase" target="repo_green"><mxGeometry relative="1" as="geometry" /></mxCell>
        <mxCell id="c4" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0.5;entryY=0;entryDx=0;entryDy=0;" edge="1" parent="1" source="usecase" target="repo_loan"><mxGeometry relative="1" as="geometry" /></mxCell>
        <mxCell id="c5" value="HTTPS" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=1;exitY=0.5;exitDx=0;exitDy=0;" edge="1" parent="1" source="interceptor" target="rate_limit"><mxGeometry relative="1" as="geometry" /></mxCell>

        <mxCell id="c6" value="/green-points" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=1;exitY=0.5;exitDx=0;exitDy=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;fontColor=#009900;" edge="1" parent="1" source="router" target="qr_validator"><mxGeometry relative="1" as="geometry" /></mxCell>
        <mxCell id="c7" value="/loans" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.5;exitY=1;exitDx=0;exitDy=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;" edge="1" parent="1" source="router" target="loan_controller"><mxGeometry relative="1" as="geometry" /></mxCell>

        <mxCell id="c8" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" edge="1" parent="1" source="qr_validator" target="points_calc"><mxGeometry relative="1" as="geometry" /></mxCell>
        <mxCell id="c9" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" edge="1" parent="1" source="geo_engine" target="points_calc"><mxGeometry relative="1" as="geometry" /></mxCell>
        <mxCell id="c10" value="Persist" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" edge="1" parent="1" source="points_calc" target="event_pub"><mxGeometry relative="1" as="geometry" /></mxCell>
        <mxCell id="c11" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" edge="1" parent="1" source="event_pub" target="mongo_db"><mxGeometry relative="1" as="geometry" /></mxCell>

        <mxCell id="c12" value="SQL" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" edge="1" parent="1" source="loan_controller" target="mysql_db"><mxGeometry relative="1" as="geometry" /></mxCell>
        <mxCell id="c13" value="Trigger" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" edge="1" parent="1" source="scheduler" target="loan_controller"><mxGeometry relative="1" as="geometry" /></mxCell>

      </root>
    </mxGraphModel>
  </diagram>
</mxfile>